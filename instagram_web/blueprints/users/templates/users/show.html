{% extends "_layout.html" %}

{% block title %}
{{user.name}}
{% endblock %}

{% block header %}
{% endblock %}

{% block content %}


<!-- <h2>Your email is {{user.email}}</h2> -->
<!-------------------- IMPLEMENT USER PAGE -->

<!-- {% for image in user.userimages %}
<img src="image.user_image" alt="uploaded user pics">
{% endfor %} -->

<!-- FOLLOWING/FOLLOWS -->
<div class="container d-flex p-3 flex-nowrap">
    <div class="col-8">
        <h1>{{user.name}}'s Page</h1>
    </div>
    {% if not current_user.is_following(user) %}

    <div class="col-4">
        <form action="{{url_for('follows.create', idol_id=user.id)}}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <button type="submit" , class="btn btn-primary">Follow</button>
        </form>
        {% else %}
        <button type="disabled" , class="btn btn-primary">Requested</button>

        {% endif %}
        <h4>Followers: {{user.fans | length}}</h4>
        <h4>Following: {{user.idols | length}}</h4>

    </div>
</div>


<!--------- MASONRY FOR USER IMAGE CARDS GO HERE -------->
<div class="container">
    <div class="card-columns">
        {% for images in user.userimages %}
        <!-- VERY IMPORTANT WAY TO DISPLAY USER IMAGES -->
        <!-- userimages model connected to user model using user.userimages -->
        <div class="card shadow p-3 mb-5 bg-white rounded">
            <div>
                <img class="editpic card-img" src="{{images.user_image_url}}" alt="profile placeholder">
            </div>
        </div>
        {% else %}
        <div class="card">
            <img class="editpic" src="{{url_for('static', filename='images/placeholder.png')}}"
                alt=" profile placeholder">
        </div>
        {% endfor %}
    </div>
</div>
<!-- <div>
    <h1>Page is WIP. Enjoy this in the meantime</h1>
    <img src="{{url_for('static', filename='images/meow.jpg')}}" alt="cat pointing at woman" height="300" width="400">
</div> -->

<!-- <form method="post" action="{{url_for('users.create')}}">
    <div class="form-group">
        <label for="exampleInputUsername">Username</label>
        <input type="username" class="form-control" name="new_name">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    </div>
    <div class="form-group">
        <label for="exampleInputEmail1">Email address</label>
        <input type="email" class="form-control" name="new_email">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
    </div>
    <div class="form-group">
        <label for="exampleInputPassword1">Password</label>
        <input type="password" class="form-control" name="new_password">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% for error in errors if errors|length > 0 %}
<div style="margin:30px" class="alert alert-danger" role="alert">
    <li>{{error}}</li>
</div> -->
{% endfor %}

{% endblock %}